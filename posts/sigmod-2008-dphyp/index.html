<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>[SIGMOD 2008] Dynamic Programming Strikes Back &#183; Jian Zhang</title><meta name=title content="[SIGMOD 2008] Dynamic Programming Strikes Back &#183; Jian Zhang"><meta name=description content="My personal blog"><link rel=canonical href=https://zz-jason.github.io/posts/sigmod-2008-dphyp/><link type=text/css rel=stylesheet href=/css/main.bundle.min.41a504aed144b348a0001b6ff29d5b65569e83147d6ebb893db567d1f44b1b5c592e6639ff2e3d15baf6b00e0ccc9b7f1665346d3a08480aabe11083f276b25d.css integrity="sha512-QaUErtFEs0igABtv8p1bZVaegxR9bruJPbVn0fRLG1xZLmY5/y49Fbr2sA4MzJt/FmU0bToISAqr4RCD8nayXQ=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
<script src=/js/zoom.min.js></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="[SIGMOD 2008] Dynamic Programming Strikes Back"><meta property="og:description" content="本文封面图片来自 自然摄影师雷雨"><meta property="og:type" content="article"><meta property="og:url" content="https://zz-jason.github.io/posts/sigmod-2008-dphyp/"><meta property="og:image" content="https://zz-jason.github.io/posts/sigmod-2008-dphyp/featured.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-04T08:00:00+00:00"><meta property="article:modified_time" content="2023-06-04T08:00:00+00:00"><meta property="og:site_name" content="Jian Zhang"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://zz-jason.github.io/posts/sigmod-2008-dphyp/featured.jpg"><meta name=twitter:title content="[SIGMOD 2008] Dynamic Programming Strikes Back"><meta name=twitter:description content="本文封面图片来自 自然摄影师雷雨"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"[SIGMOD 2008] Dynamic Programming Strikes Back","headline":"[SIGMOD 2008] Dynamic Programming Strikes Back","abstract":"本文封面图片来自 自然摄影师雷雨","inLanguage":"en","url":"https:\/\/zz-jason.github.io\/posts\/sigmod-2008-dphyp\/","author":{"@type":"Person","name":"Jian Zhang"},"copyrightYear":"2023","dateCreated":"2023-06-04T08:00:00\u002b00:00","datePublished":"2023-06-04T08:00:00\u002b00:00","dateModified":"2023-06-04T08:00:00\u002b00:00","mainEntityOfPage":"true","wordCount":"1367"}]</script><meta name=author content="Jian Zhang"><link href=zjsariel@gmail.com rel=me><link href=https://github.com/zz-jason rel=me><link href=https://linkedin.com/in/zhangjian1012 rel=me><link href=https://twitter.com/zhangjian1012 rel=me><script src=/lib/jquery/jquery.slim.min.js integrity></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1KC0CPJVWV"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1KC0CPJVWV")</script><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">Jian Zhang</a></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12"><a href=/posts/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=Posts>Achieves</p></a><a href=/categories/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=Categories>Categories</p></a><a href=/about/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title="About Me">About</p></a></nav><div class="flex md:hidden items-center space-x-5 md:ml-12"><span></span></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button for=menu-controller class=block><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-auto overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/posts/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=Posts>Achieves</p></a></li><li class=mt-1><a href=/categories/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=Categories>Categories</p></a></li><li class=mt-1><a href=/about/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title="About Me">About</p></a></li></ul></div></label></div></div><script>(function(){var e=$(".main-menu"),t=window.location.pathname;e.find('a[href="'+t+'"]').each(function(e,t){$(t).children("p").addClass("active")})})()</script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom" style=background-image:url(/posts/sigmod-2008-dphyp/featured_hua68e47c8439864b8aa911bccb3cadc93_391561_1200x0_resize_q75_box.jpg)><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal"></div></div><div id=background-blur class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("background-blur");n.style.opacity=t/300})</script><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">[SIGMOD 2008] Dynamic Programming Strikes Back</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2023-06-04 08:00:00 +0000 UTC">4 June 2023</time><span class="px-2 text-primary-500">&#183;</span><span>1367 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">7 mins</span></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/categories/paper-reading/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Paper Reading</span></span></span>
<span style=margin-top:.5rem class=mr-2 onclick='window.open("/categories/join-reorder/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Join Reorder</span></span></span></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first sm:max-w-prose lg:ml-auto px-0 lg:order-last lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10"><details open class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#introduction>INTRODUCTION</a></li><li><a href=#hypergraphs>HYPERGRAPHS</a><ul><li><a href=#definitions>Definitions</a></li><li><a href=#csg-cmp-pair>Csg-cmp-pair</a></li><li><a href=#neighborhood>Neighborhood</a></li></ul></li><li><a href=#the-algorithm>THE ALGORITHM</a><ul><li><a href=#solve>Solve()</a></li><li><a href=#enumeratecsgrec>EnumerateCsgRec()</a></li><li><a href=#emitcsg>EmitCsg()</a></li><li><a href=#enumeratecmprec>EnumerateCmpRec()</a></li><li><a href=#emitcsgcmp>EmitCsgCmp()</a></li></ul></li><li><a href=#evaluation>Evaluation</a><ul><li><a href=#cycle-based-hypergraphs>Cycle-Based Hypergraphs</a></li><li><a href=#star-based-hypergraphs>Star-Based Hypergraphs</a></li><li><a href=#queries-with-regular-graphs>Queries with Regular Graphs</a></li></ul></li><li><a href=#non-reorderable-operators>NON-REORDERABLE OPERATORS</a><ul><li><a href=#considered-binary-operators>Considered Binary Operators</a></li><li><a href=#reorderability>Reorderability</a></li><li><a href=#existing-approaches>Existing Approaches</a></li><li><a href=#non-commutative-operators>Non-Commutative Operators</a></li></ul></li><li><a href=#translation-of-join-predicates>TRANSLATION OF JOIN PREDICATES</a></li></ul></nav></div></details><details class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#introduction>INTRODUCTION</a></li><li><a href=#hypergraphs>HYPERGRAPHS</a><ul><li><a href=#definitions>Definitions</a></li><li><a href=#csg-cmp-pair>Csg-cmp-pair</a></li><li><a href=#neighborhood>Neighborhood</a></li></ul></li><li><a href=#the-algorithm>THE ALGORITHM</a><ul><li><a href=#solve>Solve()</a></li><li><a href=#enumeratecsgrec>EnumerateCsgRec()</a></li><li><a href=#emitcsg>EmitCsg()</a></li><li><a href=#enumeratecmprec>EnumerateCmpRec()</a></li><li><a href=#emitcsgcmp>EmitCsgCmp()</a></li></ul></li><li><a href=#evaluation>Evaluation</a><ul><li><a href=#cycle-based-hypergraphs>Cycle-Based Hypergraphs</a></li><li><a href=#star-based-hypergraphs>Star-Based Hypergraphs</a></li><li><a href=#queries-with-regular-graphs>Queries with Regular Graphs</a></li></ul></li><li><a href=#non-reorderable-operators>NON-REORDERABLE OPERATORS</a><ul><li><a href=#considered-binary-operators>Considered Binary Operators</a></li><li><a href=#reorderability>Reorderability</a></li><li><a href=#existing-approaches>Existing Approaches</a></li><li><a href=#non-commutative-operators>Non-Commutative Operators</a></li></ul></li><li><a href=#translation-of-join-predicates>TRANSLATION OF JOIN PREDICATES</a></li></ul></nav></div></details><script>(function(){var t,e=$("#TableOfContents");if(e.length>0){t=$(window);function n(){var s,o=t.scrollTop(),i=$(".anchor"),n="";if(i.each(function(e,t){t=$(t),t.offset().top-$(window).height()/3<=o&&(n=t.attr("id"))}),s=e.find("a.active"),s.length==1&&s.eq(0).attr("href")=="#"+n)return!0;s.each(function(e,t){$(t).removeClass("active")}),e.find('a[href="#'+n+'"]').addClass("active"),e.find('a[href="#'+n+'"]').parentsUntil("#TableOfContents").each(function(e,t){$(t).children("a").parents("ul").show()})}t.on("scroll",n),$(document).ready(function(){n()})}})()</script></div></div><div class="min-w-0 min-h-0 max-w-prose"><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/featured_hua68e47c8439864b8aa911bccb3cadc93_391561_330x0_resize_q75_box.jpg 330w,
/posts/sigmod-2008-dphyp/featured_hua68e47c8439864b8aa911bccb3cadc93_391561_660x0_resize_q75_box.jpg 660w,
/posts/sigmod-2008-dphyp/featured_hua68e47c8439864b8aa911bccb3cadc93_391561_1024x0_resize_q75_box.jpg 1024w,
/posts/sigmod-2008-dphyp/featured_hua68e47c8439864b8aa911bccb3cadc93_391561_1320x0_resize_q75_box.jpg 2x" src=/posts/sigmod-2008-dphyp/featured_hua68e47c8439864b8aa911bccb3cadc93_391561_660x0_resize_q75_box.jpg alt></figure></p><blockquote><p>本文封面图片来自 <a href=https://space.bilibili.com/470226708/ target=_blank>自然摄影师雷雨</a></p></blockquote><p>《Dynamic Programming Strikes Back》这篇论文提出了非常著名的 DPhyp 算法，能处理复杂的 join predicate，也能处理复杂的 join 算子，比如 outer join、semi join、anti join、dependent join 等。MySQL 8.0 实验性地支持了 DPhyp，我们最近的项目中也采用了 DPhyp，它有很高的实用价值，非常值得学习。</p><div id=introduction class=anchor></div><h2 class="relative group">INTRODUCTION
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#introduction aria-label=Anchor>#</a></span></h2><p>join reorder 算法主要是两类，一类是像 DPsize、DPsub、DPccp 这样 bottom-up 的动态规划算法，一类是像 top-down partition search 这样的记忆化搜索算法，它们目前都没有被大规模生产使用，主要原因：</p><ol><li>它们都没有考虑包含多个表，或者非等值的 join predicate</li><li>它们都没有考虑 outer join，anti join，semi join，dependent join 等不能随意 reorder 的 join operator</li></ol><p>已有的一些解决方案都不是很完美，于是作者提出了 DPhyp，希望能够同时解决上面两个问题，使其能够被用于实际生产环境中。</p><div id=hypergraphs class=anchor></div><h2 class="relative group">HYPERGRAPHS
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#hypergraphs aria-label=Anchor>#</a></span></h2><p>DPhyp 的思想和 DPccp 是类似的，都是按照一定的顺序不重复的枚举所有的 csg-cmp-pair 来完成 join reorder 的动态规划过程。</p><p>不一样的地方是，为了处理像 R1+R2+R3=R4+R5+R6 这样的多表复杂 join predicate，需要将原来的 query 构造成 hyper graph，在 hyper graph 中按照一定顺序不重复的枚举所有的 csg-cmp-pair 来完成基于 hyper graph 的 DPhyp 算法。在介绍 DPhyp 之前我们先来了解一些关于 hypergraph 的概念。</p><div id=definitions class=anchor></div><h3 class="relative group">Definitions
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#definitions aria-label=Anchor>#</a></span></h3><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/202303040026259_huf2628edcb9a5f17dac9f6a271bf79585_174068_330x0_resize_box_3.png 330w,
/posts/sigmod-2008-dphyp/202303040026259_huf2628edcb9a5f17dac9f6a271bf79585_174068_660x0_resize_box_3.png 660w,
/posts/sigmod-2008-dphyp/202303040026259_huf2628edcb9a5f17dac9f6a271bf79585_174068_1024x0_resize_box_3.png 1024w,
/posts/sigmod-2008-dphyp/202303040026259_huf2628edcb9a5f17dac9f6a271bf79585_174068_1320x0_resize_box_3.png 2x" src=/posts/sigmod-2008-dphyp/202303040026259_huf2628edcb9a5f17dac9f6a271bf79585_174068_660x0_resize_box_3.png alt="Sample Hypergraph"></figure></p><p>hypergraph 由 hypernode 和 hyperedge 构成：</p><ol><li>hypernode：普通节点的集合。例如上图中的 hypernode {R1} 和 {R1, R2, R3}</li><li>hyperedge：连接两个 hypernode V 和 U 的边，其中 V∩U=∅</li></ol><p>这样，所有的 join predicate 都可以看做是一个 hyperedge，比如 R1.a + R2.b + R3.c = R4.d + R5.e + R6.f 这个 predicate 代表了一个 hyperedge，连接了两个 hypernode {R1, R2, R3} 和 {R4, R5, R6}。</p><div id=csg-cmp-pair class=anchor></div><h3 class="relative group">Csg-cmp-pair
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#csg-cmp-pair aria-label=Anchor>#</a></span></h3><p>同样的，hypergraph 也有自己的 csg 和 cmp 的定义，只是把普通节点换成了 hypernode，把普通边换成了 hyperedge。例如，上图中：</p><ol><li>{{R4}, {R6}} 不是一个 csg，因为它们之间没有直接相连的 hyperedge，不联通。</li><li>{{R1}, {R2}} 是一个 csg，{{R4}, {R5}} 是它的一个联通 cmp，但 {{R4}, {R6}} 不是。</li></ol><p>和 DPccp 一样，csg-cmp-pair 指有 hyperedge 相连的 csg 和 cmp。用 min(S) 表示 hypernode 中最小的节点，DPhyp 仅枚举满足 min(S1) &lt; min(S2) 的 csg-cmp-pair，根据最优子结构求解最佳 join order。</p><div id=neighborhood class=anchor></div><h3 class="relative group">Neighborhood
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#neighborhood aria-label=Anchor>#</a></span></h3><p>和 DPccp 的一样，所有的 csg 和 csg-cmp-pair 都是从一个节点出发，然后根据它的 neighborhood 不断扩展来搜索到的。</p><p>hypergraph 的情况稍微复杂。</p><p>non-subsumed hyperedge：所有不被其他 hyperedge 所包含的 hyperedge 所组成的边集。例如下图中有三个超边 ({R1}, {R2}), ({R1}, {R2, R3}), ({R1, R2}, {R3, R4})，那么：</p><ol><li>({R1}, {R2}) 被 ({R1}, {R2, R3}) 包含；</li><li>({R1}, {R2, R3}) 是一个非包含的超边，因为它没有被其他任何超边包含；</li><li>({R1, R2}, {R3, R4}) 也是一个非包含的超边。</li></ol><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/202303041353643_hud72870e6a1a679eb9f889901bb67a2eb_170082_330x0_resize_box_3.png 330w,
/posts/sigmod-2008-dphyp/202303041353643_hud72870e6a1a679eb9f889901bb67a2eb_170082_660x0_resize_box_3.png 660w,
/posts/sigmod-2008-dphyp/202303041353643_hud72870e6a1a679eb9f889901bb67a2eb_170082_1024x0_resize_box_3.png 1024w,
/posts/sigmod-2008-dphyp/202303041353643_hud72870e6a1a679eb9f889901bb67a2eb_170082_1320x0_resize_box_3.png 2x" src=/posts/sigmod-2008-dphyp/202303041353643_hud72870e6a1a679eb9f889901bb67a2eb_170082_660x0_resize_box_3.png alt></figure>non-subsumed hypernode：不被其他 hypernode 包含的 hyper node，比如 hypernode {R1} 和 {R2} 被 {R1, R2} 包含，{R1} 和 {R2} 都是 non-subsumed hypernode，而 {R1, R2} 不是 non-subsumed hypernode。</p><p>interesting hypernode：寻找 interesting hypernode 分为两步：</p><ol><li>找到所有潜在的 interesting hypernode 集合 E↓′(S, X)，然后最小化 E↓′(S, X)，消除其中被包含的 hypernode，得到最终的 interesting hypernode 集合 E↓(S, X)。</li></ol><p>就这些定义，给定一个 hypernode S 和一个 excluded 节点集 X，它的 neighborhood 点集 N(S, X) 为：</p><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/202306040907888_hu50fa22dd560f5aa1b06cdf7625bce85c_52403_330x0_resize_box_3.png 330w,
/posts/sigmod-2008-dphyp/202306040907888_hu50fa22dd560f5aa1b06cdf7625bce85c_52403_660x0_resize_box_3.png 660w,
/posts/sigmod-2008-dphyp/202306040907888_hu50fa22dd560f5aa1b06cdf7625bce85c_52403_1024x0_resize_box_3.png 1024w,
/posts/sigmod-2008-dphyp/202306040907888_hu50fa22dd560f5aa1b06cdf7625bce85c_52403_1320x0_resize_box_3.png 2x" src=/posts/sigmod-2008-dphyp/202306040907888_hu50fa22dd560f5aa1b06cdf7625bce85c_52403_660x0_resize_box_3.png alt="the neighborhood of a hyper- node S"></figure>对于一开始图 2 中的 hypergraph 来说，当 S 和 X 都为 {R1, R2, R3} 时，N(S, X) 为 {R4}。</p><div id=the-algorithm class=anchor></div><h2 class="relative group">THE ALGORITHM
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-algorithm aria-label=Anchor>#</a></span></h2><p>主要的挑战：</p><ol><li>如何高效的遍历 Hyperedge，使得我们可以遍历出所有相邻的 Hypernode。</li><li>Hyperedge 指向的 Hypernode 可能包含多个节点，使得递归遍历和增长 Hypergraph 子图变的非常复杂。</li></ol><p>为了方便的保存算法执行过程的上下文信息，论文将 Hypergraph Join Order 算法需要使用的中间数据保存在 DPhyp 这个 class 中，将算法所涉及到的 5 个子过程实现为 DPhyp 的成员函数。</p><p>算法的入口是 Solve() 函数，用来初始化动态规划的 DP 表，以及所有子状态（也就是单表的最佳 Join Order）的初始值。接着调用 EmitCsg() 和 EnumerateCsgRec()。</p><p>EnumerateCsgRec() 负责递归的枚举所有联通子图。</p><div id=solve class=anchor></div><h3 class="relative group">Solve()
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#solve aria-label=Anchor>#</a></span></h3><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/202303041417706_huc1fd002a1ecbf1e24803e61a0fa65c53_241931_330x0_resize_box_3.png 330w,
/posts/sigmod-2008-dphyp/202303041417706_huc1fd002a1ecbf1e24803e61a0fa65c53_241931_660x0_resize_box_3.png 660w,
/posts/sigmod-2008-dphyp/202303041417706_huc1fd002a1ecbf1e24803e61a0fa65c53_241931_1024x0_resize_box_3.png 1024w,
/posts/sigmod-2008-dphyp/202303041417706_huc1fd002a1ecbf1e24803e61a0fa65c53_241931_1320x0_resize_box_3.png 2x" src=/posts/sigmod-2008-dphyp/202303041417706_huc1fd002a1ecbf1e24803e61a0fa65c53_241931_660x0_resize_box_3.png alt="Pseudo code for solve"></figure></p><ol><li>The algorithm calls EmitCsg({v}) for single nodes v ∈ V to generate all csg-cmp-pairs ({v}, S2) via calls to EnumerateCsgCmp and EmitCsgCmp.</li><li>The calls to EnumerateCsgRec extend the initial set {v} to larger sets S1.</li></ol><div id=enumeratecsgrec class=anchor></div><h3 class="relative group">EnumerateCsgRec()
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#enumeratecsgrec aria-label=Anchor>#</a></span></h3><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/202303041423506_hu4f8606f14f32b3bf9d6f243a942e5dd7_256572_330x0_resize_box_3.png 330w,
/posts/sigmod-2008-dphyp/202303041423506_hu4f8606f14f32b3bf9d6f243a942e5dd7_256572_660x0_resize_box_3.png 660w,
/posts/sigmod-2008-dphyp/202303041423506_hu4f8606f14f32b3bf9d6f243a942e5dd7_256572_1024x0_resize_box_3.png 1024w,
/posts/sigmod-2008-dphyp/202303041423506_hu4f8606f14f32b3bf9d6f243a942e5dd7_256572_1320x0_resize_box_3.png 2x" src=/posts/sigmod-2008-dphyp/202303041423506_hu4f8606f14f32b3bf9d6f243a942e5dd7_256572_660x0_resize_box_3.png alt=EnumerateCsgRec></figure></p><p>EnumerateCsgRec 的主要作用通过 csg S1 的 neighborhood 将其扩展成更大的 csg。</p><ol><li>For each of these subsets N, it checks whether S1 ∪ N is a connected component. This is done by a lookup into the dpTable. If this test succeeds, a new connected com- ponent has been found and is further processed by a call EmitCsg(S1 ∪ N ).</li><li>Then, in a second step, for all these sub- sets N of the neighborhood, we call EnumerateCsgRec such that S1 ∪ N can be further extended recursively.</li></ol><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/202303041531471_huc8dd876172758c362556d8267a682a8a_175995_330x0_resize_q75_box.jpg 330w,
/posts/sigmod-2008-dphyp/202303041531471_huc8dd876172758c362556d8267a682a8a_175995_660x0_resize_q75_box.jpg 660w,
/posts/sigmod-2008-dphyp/202303041531471_huc8dd876172758c362556d8267a682a8a_175995_1024x0_resize_q75_box.jpg 1024w,
/posts/sigmod-2008-dphyp/202303041531471_huc8dd876172758c362556d8267a682a8a_175995_1320x0_resize_q75_box.jpg 2x" src=/posts/sigmod-2008-dphyp/202303041531471_huc8dd876172758c362556d8267a682a8a_175995_660x0_resize_q75_box.jpg alt="EnumerateCsgRec example"></figure></p><p>Take a look at step 12. This call was generated by Solve on S1 = {R2 }. The neighborhood consists only of {R3 }, since R1 is in X (R4,R5,R6 are not in X either, but not reachable). EnumerateCsgRec first calls EmitCsg, which will create the joinable complement (step 13). It then tests {R2 , R3 } for connectedness. The according dpTable entry was generated in step 13. Hence, this test succeeds, and {R2,R3} is further processed by a recursive call to Enumer- ateCsgRec (step 14). Now the expansion stops, since the neighborhood of {R2, R3} is empty, because R1 ∈ X.</p><div id=emitcsg class=anchor></div><h3 class="relative group">EmitCsg()
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#emitcsg aria-label=Anchor>#</a></span></h3><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/202303041424606_hu1ed7d2ead4815a304e6e9773d8502575_269976_330x0_resize_box_3.png 330w,
/posts/sigmod-2008-dphyp/202303041424606_hu1ed7d2ead4815a304e6e9773d8502575_269976_660x0_resize_box_3.png 660w,
/posts/sigmod-2008-dphyp/202303041424606_hu1ed7d2ead4815a304e6e9773d8502575_269976_1024x0_resize_box_3.png 1024w,
/posts/sigmod-2008-dphyp/202303041424606_hu1ed7d2ead4815a304e6e9773d8502575_269976_1320x0_resize_box_3.png 2x" src=/posts/sigmod-2008-dphyp/202303041424606_hu1ed7d2ead4815a304e6e9773d8502575_269976_660x0_resize_box_3.png alt=EmitCsg></figure></p><p>EmitCsg 的主要作用是根据 csg S1 的 neighborhood 生成匹配的 csg-cmp-pair。</p><ol><li>B_min(S1): All nodes that have ordered before the smallest element in S1 (captured by the set B_min(S1)) are removed from the neighborhood to avoid duplicate enumerations.</li><li>Since the neighborhood also contains min(v) for hyperedges (u, v) with |v| > 1, it is not guaranteed that S1 is connected to v.</li></ol><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/202303041542844_hua9704df536f7848787fb76e750ebcde7_171297_330x0_resize_q75_box.jpg 330w,
/posts/sigmod-2008-dphyp/202303041542844_hua9704df536f7848787fb76e750ebcde7_171297_660x0_resize_q75_box.jpg 660w,
/posts/sigmod-2008-dphyp/202303041542844_hua9704df536f7848787fb76e750ebcde7_171297_1024x0_resize_q75_box.jpg 1024w,
/posts/sigmod-2008-dphyp/202303041542844_hua9704df536f7848787fb76e750ebcde7_171297_1320x0_resize_q75_box.jpg 2x" src=/posts/sigmod-2008-dphyp/202303041542844_hua9704df536f7848787fb76e750ebcde7_171297_660x0_resize_q75_box.jpg alt="EmitCsg example"></figure></p><p>Take a look at step 20. The current set S1 is S1 = {R1, R2, R3}, and the neighborhood is N = {R4}. As there is no hyperedge connecting these two sets, there is no call to EmitCsgCmp. However, the set {R4} can be extended to a valid complement, namely {R4, R5, R6}. Properly extending the seeds of complements is the task of the call to EnumerateCmpRec in step 21.</p><div id=enumeratecmprec class=anchor></div><h3 class="relative group">EnumerateCmpRec()
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#enumeratecmprec aria-label=Anchor>#</a></span></h3><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/202303041424141_huc12580ad9fef62edc2a6b13aa08da868_304678_330x0_resize_box_3.png 330w,
/posts/sigmod-2008-dphyp/202303041424141_huc12580ad9fef62edc2a6b13aa08da868_304678_660x0_resize_box_3.png 660w,
/posts/sigmod-2008-dphyp/202303041424141_huc12580ad9fef62edc2a6b13aa08da868_304678_1024x0_resize_box_3.png 1024w,
/posts/sigmod-2008-dphyp/202303041424141_huc12580ad9fef62edc2a6b13aa08da868_304678_1320x0_resize_box_3.png 2x" src=/posts/sigmod-2008-dphyp/202303041424141_huc12580ad9fef62edc2a6b13aa08da868_304678_660x0_resize_box_3.png alt=EnumerateCmpRec></figure></p><p>EnumerateCmpRec 的主要作用是基于初始的 cmp S2 和它的 neighborhood N(S2, X) 扩展更多的 cmp。</p><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/202303041554851_huc8dd876172758c362556d8267a682a8a_262543_330x0_resize_q75_box.jpg 330w,
/posts/sigmod-2008-dphyp/202303041554851_huc8dd876172758c362556d8267a682a8a_262543_660x0_resize_q75_box.jpg 660w,
/posts/sigmod-2008-dphyp/202303041554851_huc8dd876172758c362556d8267a682a8a_262543_1024x0_resize_q75_box.jpg 1024w,
/posts/sigmod-2008-dphyp/202303041554851_huc8dd876172758c362556d8267a682a8a_262543_1320x0_resize_q75_box.jpg 2x" src=/posts/sigmod-2008-dphyp/202303041554851_huc8dd876172758c362556d8267a682a8a_262543_660x0_resize_q75_box.jpg alt="EnumerateCmpRec example"></figure></p><p>Take a look at step 21 again. The parameters are S1 = {R1, R2, R3} and S2 = {R4}. The neighborhood consists of the single relation R5. The set {R4,R5} induces a connected subgraph. It was inserted into dpTable in step 6. However, there is no hyperedge connecting it to S1. Hence, there is no call to EmitCsgCmp. Next is the recursive call in step 22 with S2 changed to {R4,R5}. Its neighborhood is {R6}. The set {R4,R5,R6} induces a connected subgraph. The according test via a lookup into dpTable succeeds, since the according entry was generated in step 7. The second part of the test also succeeds, as our only true hyperedge connects this set with S1. Hence, the call to EmitCsgCmp in step 23 takes place and generates the plans containing all relations.</p><div id=emitcsgcmp class=anchor></div><h3 class="relative group">EmitCsgCmp()
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#emitcsgcmp aria-label=Anchor>#</a></span></h3><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/202303041425353_hu1f416ea115753af587411e6b2ade708d_394203_330x0_resize_box_3.png 330w,
/posts/sigmod-2008-dphyp/202303041425353_hu1f416ea115753af587411e6b2ade708d_394203_660x0_resize_box_3.png 660w,
/posts/sigmod-2008-dphyp/202303041425353_hu1f416ea115753af587411e6b2ade708d_394203_1024x0_resize_box_3.png 1024w,
/posts/sigmod-2008-dphyp/202303041425353_hu1f416ea115753af587411e6b2ade708d_394203_1320x0_resize_box_3.png 2x" src=/posts/sigmod-2008-dphyp/202303041425353_hu1f416ea115753af587411e6b2ade708d_394203_660x0_resize_box_3.png alt=EmitCsgCmp></figure></p><p>EmitCsgCmp 的主要作用是将 csg-cmp-pair (S1, S2) 的最佳 plan join 起来，计算 S1、S2 的 join predicate 和 join cost，更新 dpTable。</p><p>The task of EmitCsgCmp(S1,S2) is to join the optimal plans for S1 and S2, which must form a csg-cmp-pair. For this purpose, we must be able to calculate the proper join predicate and costs of the resulting joins.</p><div id=evaluation class=anchor></div><h2 class="relative group">Evaluation
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#evaluation aria-label=Anchor>#</a></span></h2><p>目前没有太多关于 Hypergraph 的 Join Order Benchmark，所以论文自己尝试构造了几个 Benchmark：</p><blockquote><p>The general design princi- ple of our hypergraphs used in the experiments is that we start with a simple graph and add one big hyperedge to it. Then, we successively split the hyperedge into two smaller ones until we reach simple edges. As starting points, we use those graphs that have proven useful for the join ordering of simple graphs.</p></blockquote><p>论文着重考虑 Cycle 和 Star Query，没有考虑 Chain 和 Clique Query：</p><blockquote><p>The behavior of join ordering algorithms on chains and cycles does not differ much: the impact of one additional edge is minor. Hence, we decided to use cycles as one starting point.</p><p>Star queries have also been proven to be very useful to illustrate different performance behaviors of join ordering algorithms. Moreover, star queries are common in data warehousing and thus deserve special attention. Hence, we also used star queries as a starting point.</p><p>The last potential candidate are clique queries. However, adding hyperedges to a clique query does not make much sense, as every subset of relations already induces a connected subgraph.</p></blockquote><p>论文给了 Split Hyperedge 得到更多 Hypergraph 的例子：</p><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/202303041632733_hucc87f4be7ae7318258ba627f8ded695f_265159_330x0_resize_box_3.png 330w,
/posts/sigmod-2008-dphyp/202303041632733_hucc87f4be7ae7318258ba627f8ded695f_265159_660x0_resize_box_3.png 660w,
/posts/sigmod-2008-dphyp/202303041632733_hucc87f4be7ae7318258ba627f8ded695f_265159_1024x0_resize_box_3.png 1024w,
/posts/sigmod-2008-dphyp/202303041632733_hucc87f4be7ae7318258ba627f8ded695f_265159_1320x0_resize_box_3.png 2x" src=/posts/sigmod-2008-dphyp/202303041632733_hucc87f4be7ae7318258ba627f8ded695f_265159_660x0_resize_box_3.png alt="Cycle and Star with initial hyperedge"></figure></p><blockquote><p>Fig. 4a shows a starting cycle-based query. It con- tains eight relations R0 , . . . , R7 . The simple edges are ({Ri},{Ri+1}) for 0 ≤ i ≤ 7 (with R7+1 = R0). We then added the hyperedge ({R0,&mldr;,R3}, {R4,&mldr;,R7}). Each of its hypernodes consists of exactly half of the re- lations. From this graph (call it G0), we derive hypergraphs G1 , . . . , G3 by successively splitting the hyperedge. This is done by splitting each hypernode into two hypernodes comprising half of the relations. That is, apart from the simple edges, G1 has the hyperedges ({R0 , R1 }, {R6 , R7 }) and ({R2, R3}, {R4, R5}). To derive G2, we split the first hyperedge into ({R0 }, {R6 }) and ({R1 }, {R7 }). G3 addi- tionally splits the second hyperedge into ({R2},{R4}) and ({R3 }, {R5 }).</p></blockquote><p>比较可惜的是，这篇论文仅关注了 DPhyp 生成 Join Order 的优化时间，没有关注生成的 Join Order 实际运行时间。在 Selectivity 估算、Cost Model 都理想的情况下，DPhyp 确实能产生不错的执行计划。不过考虑到 Selectivity 估算误差，所做出来的 Join Order 的实际运行时间是否也是最优的可能还需要更多的实验来验证。不过这个就属于 Join Order 问题的其他子问题了：</p><ol><li>如何准确、高效的估算 Join Cardinality</li><li>如何建立 Cost Model 以考虑不同的 Join 算子物理实现之间的代价</li></ol><div id=cycle-based-hypergraphs class=anchor></div><h3 class="relative group">Cycle-Based Hypergraphs
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#cycle-based-hypergraphs aria-label=Anchor>#</a></span></h3><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/202303041619801_hu007e98a31d1be32da04251a8c3fffb87_267423_330x0_resize_box_3.png 330w,
/posts/sigmod-2008-dphyp/202303041619801_hu007e98a31d1be32da04251a8c3fffb87_267423_660x0_resize_box_3.png 660w,
/posts/sigmod-2008-dphyp/202303041619801_hu007e98a31d1be32da04251a8c3fffb87_267423_1024x0_resize_box_3.png 1024w,
/posts/sigmod-2008-dphyp/202303041619801_hu007e98a31d1be32da04251a8c3fffb87_267423_1320x0_resize_box_3.png 2x" src=/posts/sigmod-2008-dphyp/202303041619801_hu007e98a31d1be32da04251a8c3fffb87_267423_660x0_resize_box_3.png alt="Results for cycle-based hypergraphs"></figure></p><div id=star-based-hypergraphs class=anchor></div><h3 class="relative group">Star-Based Hypergraphs
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#star-based-hypergraphs aria-label=Anchor>#</a></span></h3><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/202303041621111_hu007e98a31d1be32da04251a8c3fffb87_289447_330x0_resize_box_3.png 330w,
/posts/sigmod-2008-dphyp/202303041621111_hu007e98a31d1be32da04251a8c3fffb87_289447_660x0_resize_box_3.png 660w,
/posts/sigmod-2008-dphyp/202303041621111_hu007e98a31d1be32da04251a8c3fffb87_289447_1024x0_resize_box_3.png 1024w,
/posts/sigmod-2008-dphyp/202303041621111_hu007e98a31d1be32da04251a8c3fffb87_289447_1320x0_resize_box_3.png 2x" src=/posts/sigmod-2008-dphyp/202303041621111_hu007e98a31d1be32da04251a8c3fffb87_289447_660x0_resize_box_3.png alt="Results for star-based hypergraphs"></figure></p><div id=queries-with-regular-graphs class=anchor></div><h3 class="relative group">Queries with Regular Graphs
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#queries-with-regular-graphs aria-label=Anchor>#</a></span></h3><p><figure><img class="my-0 rounded-md" srcset="/posts/sigmod-2008-dphyp/202303041622629_huebb479cd6b2a696969328b4441862661_196360_330x0_resize_box_3.png 330w,
/posts/sigmod-2008-dphyp/202303041622629_huebb479cd6b2a696969328b4441862661_196360_660x0_resize_box_3.png 660w,
/posts/sigmod-2008-dphyp/202303041622629_huebb479cd6b2a696969328b4441862661_196360_1024x0_resize_box_3.png 1024w,
/posts/sigmod-2008-dphyp/202303041622629_huebb479cd6b2a696969328b4441862661_196360_1320x0_resize_box_3.png 2x" src=/posts/sigmod-2008-dphyp/202303041622629_huebb479cd6b2a696969328b4441862661_196360_660x0_resize_box_3.png alt="Results for star-based regular graphs"></figure></p><div id=non-reorderable-operators class=anchor></div><h2 class="relative group">NON-REORDERABLE OPERATORS
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#non-reorderable-operators aria-label=Anchor>#</a></span></h2><div id=considered-binary-operators class=anchor></div><h3 class="relative group">Considered Binary Operators
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#considered-binary-operators aria-label=Anchor>#</a></span></h3><blockquote><p>Besides the fully reorderable join (B), we also consider the following operators with limited reorderability capabilities: full outer join (M), left outer join (P), left antijoin (I), left semijoin (G), and left nestjoin (T). Except for the nestjoin, these are standard operators.</p></blockquote><p>nestjoin 有一种变种称之为 d-join，d-join 可以和看做是 SQL Server 中的 Apply 算子，或者 Hyper 中的 DependentJoin 算子。在子查询优化中通常用来表示关联子查询，对子查询的解关联优化非常有帮助。</p><div id=reorderability class=anchor></div><h3 class="relative group">Reorderability
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#reorderability aria-label=Anchor>#</a></span></h3><div id=existing-approaches class=anchor></div><h3 class="relative group">Existing Approaches
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#existing-approaches aria-label=Anchor>#</a></span></h3><p>Rao et al 在《A practical approach to outerjoin and antijoin reordering》中提出了基于 extended eligibility list (EEL) 的方案，能够高效的处理普通 join、left join 和 anti join，但是不能处理 dependent join。另外是它需要在 EmitCsgCmp 中检查，</p><div id=non-commutative-operators class=anchor></div><h3 class="relative group">Non-Commutative Operators
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#non-commutative-operators aria-label=Anchor>#</a></span></h3><div id=translation-of-join-predicates class=anchor></div><h2 class="relative group">TRANSLATION OF JOIN PREDICATES
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#translation-of-join-predicates aria-label=Anchor>#</a></span></h2></br></br></div><script>var oid="views_posts/sigmod-2008-dphyp/index.md",oid_likes="likes_posts/sigmod-2008-dphyp/index.md"</script><script type=text/javascript src=/js/page.min.0e49973b4ad0a382c7c6012d8bff8226316642daabc4f8a20477bd08674f3da6e2fa993bc20ad4f51e7c5bb68e6f913a207a7c4fe37ea0e7b806894afce0a64e.js integrity="sha512-DkmXO0rQo4LHxgEti/+CJjFmQtqrxPiiBHe9CGdPPabi+pk7wgrU9R58W7aOb5E6IHp8T+N+oOe4BolK/OCmTg=="></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=flex><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt="Jian Zhang" src=/img/author_hu2e2e832894596e8fd219c1697ebbdb2b_59617_192x192_fill_q75_box_center.jpeg><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Jian Zhang</div><div class="text-sm text-neutral-700 dark:text-neutral-400">We always overestimate the change that will occur in the next two years and underestimate the change that will occur in the next ten. Don’t let yourself be lulled into inaction</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=zjsariel@gmail.com target=_blank aria-label=Email rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/zz-jason target=_blank aria-label=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://linkedin.com/in/zhangjian1012 target=_blank aria-label=Linkedin rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://twitter.com/zhangjian1012 target=_blank aria-label=Twitter rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span></span></a></div></div></div></div><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/posts/vldb-2006-dpccp/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">[VLDB 2006] Analysis of Two Existing and One New Dynamic Programming Algorithm for the Generation of Optimal Bushy Join Trees without Cross Products</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2023-05-28 00:00:00 +0000 UTC">28 May 2023</time></span></span></a></span>
<span><a class="flex text-right group ml-3" href=/posts/mysql-optimizer-trace/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">[MySQL 8.0] 通过 Optimizer Trace 概览查询优化</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2023-07-01 00:00:00 +0000 UTC">1 July 2023</time></span></span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div><div class=pt-3><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class=pt-3><script src=https://utteranc.es/client.js repo=zz-jason/zz-jason.github.io issue-term=pathname theme=github-dark crossorigin=anonymous async></script></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">@2023 Jian Zhang</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a></p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.35c1113bcc16c5a59bf031082f9e63822aa95280423881a7847a7ff33a16e6299ce6a840d9ef4e10d947e030a18f3f20359afb2ec0f35967484b9a9360ac3145.js integrity="sha512-NcERO8wWxaWb8DEIL55jgiqpUoBCOIGnhHp/8zoW5imc5qhA2e9OENlH4DChjz8gNZr7LsDzWWdIS5qTYKwxRQ=="></script></footer></div></body></html>